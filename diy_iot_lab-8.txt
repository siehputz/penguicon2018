<<<
== LAB 8 :: Familiarize Yourself with Node-RED

=== Create a basic Node-RED flow and see how to connect nodes
[start=1]
. To start Node-RED
* In a terminal window type
** node node_modules/node-red/red
* Using a browser
** go to "http://127.0.0.1:1880/" to navigate to the Node-RED screen
. Open a browser on your lab system.
. Note that 1880 is the default port for Node-RED, and can be changed in the settings.js 
file.
. You will see the Node-RED screen, with node choices on the left,
the design screen in the middle, and info and debug tabs on the 
right.
. Click and drag an `inject' input node onto the design screen.
. Double clicking on the new node will bring up an edit window on 
the screen. For now, just change the name to `Time' and click `Done'.
. Click and drag a `debug' output node onto the design screen.
. Change its name to `Test'.
. Connect the two nodes by clicking on the right side of the `Time' 
node and dragging a line to the left side of the `Test' node.
. Click on the `Deploy' button on the top right. Note that in 
Node-RED no changes take effect until they are deployed.
. Click on the `debug' tab on the right side to show the debug 
screen.
. Click on the button on the left side of the `Time' node. This 
activates that node. Look at the debug window to see the 
timestamp displayed.


==== Part 2 ::Modify the flow to add a function node

[start=1]
. Click on the line between the two nodes, and hit `delete' on 
the keyboard to remove it.
. Click and drag a function node between the two existing 
nodes. You can move the existing nodes around on the screen if 
needed to make space.
. Double-click on the function node to bring up the edit 
window, and enter the following code:
[width="50%", cols="m", grid="none"]
|==============================================
|     // Create a Date object from the payload
|     var date = new Date(msg.payload);
|     // Change the payload to be a formatted Date string
|     msg.payload = date.toString();
|     // Return the message so it can be sent on
|     return msg;
|==============================================

[start=4]
. Click `Done', and then connect the output of the `Time' 
node to the input of the function node, and the output of the 
function node to the input of the `Test' node.
. Deploy the flow, then click on the activate button on the 
`Time' node. You should now see a formatted date in the debug 
window.

// vim: set syntax=asciidoc:
